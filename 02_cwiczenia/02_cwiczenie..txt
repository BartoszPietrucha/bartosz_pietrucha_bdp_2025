4.
CREATE TABLE buildings (
    id SERIAL PRIMARY KEY,
    geometry GEOMETRY(POLYGON, 0),
    name VARCHAR
);

CREATE TABLE roads (
    id SERIAL PRIMARY KEY,
    geometry GEOMETRY(LINESTRING, 0),
    name VARCHAR
);

CREATE TABLE poi (
    id SERIAL PRIMARY KEY,
    geometry GEOMETRY(POINT, 0),
    name VARCHAR
);

5. 

INSERT INTO buildings (geometry, name) VALUES 
(ST_GeomFromText('POLYGON((1 2, 2 2, 2 1, 1 1, 1 2))', 0), 'BuildingF');


INSERT INTO buildings (geometry, name) VALUES 
(ST_GeomFromText('POLYGON((4 7, 6 7, 6 5, 4 5, 4 7))', 0), 'BuildingB');


INSERT INTO buildings (geometry, name) VALUES 
(ST_GeomFromText('POLYGON((3 8, 5 8, 5 6, 3 6, 3 8))', 0), 'BuildingC');


INSERT INTO buildings (geometry, name) VALUES 
(ST_GeomFromText('POLYGON((9 9, 10 9, 10 8, 9 8, 9 9))', 0), 'BuildingD');


INSERT INTO buildings (geometry, name) VALUES 
(ST_GeomFromText('POLYGON((8 4, 10.5 4, 10.5 1.5, 8 1.5, 8 4))', 0), 'BuildingA');


INSERT INTO roads (geometry, name) VALUES 
(ST_GeomFromText('LINESTRING(7.5 10.5, 7.5 0)', 0), 'RoadY');

INSERT INTO roads (geometry, name) VALUES 
(ST_GeomFromText('LINESTRING(0 4.5, 12 4.5)', 0), 'RoadX');


INSERT INTO poi (geometry, name) VALUES 
(ST_GeomFromText('POINT(6 9.5)', 0), 'K');

INSERT INTO poi (geometry, name) VALUES 
(ST_GeomFromText('POINT(6.5 6)', 0), 'J');

INSERT INTO poi (geometry, name) VALUES 
(ST_GeomFromText('POINT(9.5 6)', 0), 'I');

INSERT INTO poi (geometry, name) VALUES 
(ST_GeomFromText('POINT(5.5 1.5)', 0), 'H');

INSERT INTO poi (geometry, name) VALUES 
(ST_GeomFromText('POINT(1 3.5)', 0), 'G');

6. 

a)

SELECT SUM(ST_Length(geometry)) AS calkowita_dlugosc_drog
FROM roads;

b)
SELECT 
    ST_AsText(geometry) AS geometria_wkt,
    ST_Area(geometry) AS pole_powierzchni,
    ST_Perimeter(geometry) AS obwod
FROM buildings
WHERE name = 'BuildingA';

c)

SELECT 
    name,
    ST_Area(geometry) AS pole_powierzchni
FROM buildings
ORDER BY name ASC;
d)
SELECT 
    name,
    ST_Perimeter(geometry) AS obwod
FROM buildings
ORDER BY ST_Area(geometry) DESC, name ASC
LIMIT 2;

e)
SELECT ST_Distance(b.geometry, p.geometry) AS najkrotsza_odleglosc
FROM buildings b, poi p
WHERE b.name = 'BuildingC' AND p.name = 'K';

f)

SELECT ST_Area(
    ST_Difference(
        c.geometry, 
        ST_Buffer(b.geometry, 0.5)
    )
) AS pole_czesci_daleko
FROM buildings c, buildings b
WHERE c.name = 'BuildingC' AND b.name = 'BuildingB';

g)

SELECT name
FROM buildings b
WHERE ST_Y(ST_Centroid(b.geometry)) > (
    SELECT ST_Y(ST_PointN(geometry, 1))
    FROM roads r
    WHERE r.name = 'RoadX'
);

h)


SELECT ST_Area(
    ST_SymDifference(
        b.geometry,
        ST_GeomFromText('POLYGON((4 7, 6 7, 6 8, 4 8, 4 7))', 0)
    )
) AS pole_nie_wspolne
FROM buildings b
WHERE b.name = 'BuildingC';
